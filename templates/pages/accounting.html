{% extends "base/layout.html" %}
{% block title %}AIãƒ»çµŒç†éƒ¨ | ãƒªã‚µãƒ¼ãƒãƒŠãƒ“{% endblock %}
{% block content %}

<h1>ğŸ§  AIãƒ»çµŒç†éƒ¨ï¼ˆå¸³ç°¿ãƒ»ç¨å‹™ãƒ»AIåˆ¤æ–­ï¼‰</h1>

<form method="POST">
  <label>æ—¥ä»˜</label><input type="date" name="date" required>
  <label>å•†å“å</label><input type="text" name="item" required>
  <label>ã‚«ãƒ†ã‚´ãƒª</label><input type="text" name="category">
  <label>ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ </label>
  <select name="platform">
    <option value="ãƒ¡ãƒ«ã‚«ãƒª">ãƒ¡ãƒ«ã‚«ãƒª</option>
    <option value="Amazon">Amazon</option>
    <option value="æ¥½å¤©">æ¥½å¤©</option>
    <option value="Yahoo">Yahoo</option>
  </select>
  <label>å£²ä¾¡</label><input type="number" step="0.01" name="revenue">
  <label>ä»•å…¥</label><input type="number" step="0.01" name="cost">
  <label>æ‰‹æ•°æ–™</label><input type="number" step="0.01" name="fee">
  <label>é€æ–™</label><input type="number" step="0.01" name="shipping">
  <label>çµŒè²»</label><input type="number" step="0.01" name="expense">
  <label>ã‚¿ã‚°</label><input type="text" name="tags">
  <button type="submit">ä¿å­˜</button>
</form>

<hr>

<h2>ğŸ“Š æœˆæ¬¡ã‚µãƒãƒªãƒ¼</h2>
{% if summary.empty %}
<p>ã¾ã ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
{% else %}
<table border="1">
  <tr>
    <th>æœˆ</th><th>å£²ä¸Š</th><th>ä»•å…¥</th><th>æ‰‹æ•°æ–™</th><th>é€æ–™</th><th>çµŒè²»</th><th>åˆ©ç›Š</th>
  </tr>
  {% for row in summary.itertuples() %}
  <tr>
    <td>{{ row.month }}</td>
    <td>{{ "{:,.0f}".format(row.revenue) }}</td>
    <td>{{ "{:,.0f}".format(row.cost) }}</td>
    <td>{{ "{:,.0f}".format(row.fee) }}</td>
    <td>{{ "{:,.0f}".format(row.shipping) }}</td>
    <td>{{ "{:,.0f}".format(row.expense) }}</td>
    <td>{{ "{:,.0f}".format(row.profit) }}</td>
  </tr>
  {% endfor %}
</table>
{% endif %}

<h2>ğŸ… ROIãƒˆãƒƒãƒ—10</h2>
{% if top_roi.empty %}
<p>ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
{% else %}
<table border="1">
  <tr><th>æ—¥ä»˜</th><th>å•†å“å</th><th>ROI%</th><th>åˆ©ç›Š</th></tr>
  {% for row in top_roi.itertuples() %}
  <tr>
    <td>{{ row.date.date() }}</td>
    <td>{{ row.item }}</td>
    <td>{{ "{:.1f}".format(row.roi) }}%</td>
    <td>{{ "{:,.0f}".format(row.profit) }}</td>
  </tr>
  {% endfor %}
</table>
{% endif %}

{% endblock %}

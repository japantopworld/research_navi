{% extends "base/layout.html" %}
{% block title %}ID・パスワードを忘れた方{% endblock %}
{% block content %}

<div style="max-width: 600px; margin: 2rem auto; padding: 2rem; background: #fff; border-radius: 0.8rem; box-shadow: 0 0 10px rgba(0,0,0,0.1);">
  <h2>❗ ID・パスワードを忘れた方</h2>
  <p>登録時のIDを入力して、照会または再発行を選択してください。</p>

  <form method="POST">
    <div style="margin-bottom: 1rem;">
      <label>ID入力（必須）</label><br>
      <input type="text" name="user_id" required style="width:100%; padding:0.6rem;">
    </div>

    <div style="margin-bottom: 1rem;">
      <label>操作を選択</label><br>
      <select name="mode" required style="width:100%; padding:0.6rem;">
        <option value="id">ID照会</option>
        <option value="password">パスワード再発行</option>
      </select>
    </div>

    <button type="submit" class="btn btn-danger">送信</button>
  </form>

  {% if message %}
    <div style="margin-top:1.5rem; padding:1rem; border:2px solid {% if '❌' in message or '⚠' in message %}#dc2626{% else %}#16a34a{% endif %}; border-radius:0.5rem; background:#fffbea;">
      <p style="margin:0; font-weight:bold;">{{ message }}</p>
      {% if new_password %}
        <p style="margin-top:0.5rem; font-size:1.2rem; color:#dc2626;">🔑 新しいパスワード: <strong>{{ new_password }}</strong></p>
      {% endif %}
    </div>
  {% endif %}

  <div style="margin-top:2rem; text-align:center;">
    <a href="{{ url_for('login_bp.login') }}" class="btn btn-outline-secondary">ログインに戻る</a>
  </div>
</div>

{% endblock %}

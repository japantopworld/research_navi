{% extends "base/layout.html" %}
{% block title %}月次レポート | リサーチナビ{% endblock %}
{% block content %}

<h1>月次レポート（PDF出力 & メール送信）</h1>

<div class="card">
  <form method="post">
    <div class="grid">
      <label>
        <span>対象月数</span>
        <select name="months">
          <option value="6">直近 6ヶ月</option>
          <option value="12" selected>直近 12ヶ月</option>
          <option value="18">直近 18ヶ月</option>
          <option value="24">直近 24ヶ月</option>
        </select>
      </label>
      <label>
        <span>プラットフォーム</span>
        <select name="platform">
          <option value="">すべて</option>
          <option value="all">すべて</option>
          {% for p in platforms %}
            <option value="{{ p }}">{{ p }}</option>
          {% endfor %}
        </select>
      </label>
      <label class="grow">
        <span>キーワード（商品名）</span>
        <input type="text" name="keyword" placeholder="例：Switch">
      </label>
    </div>
    <div class="actions">
      <button type="submit" name="action" value="download">PDFダウンロード</button>
      <button type="submit" name="action" value="send" class="secondary">PDFをメール送信</button>
      <a class="btn" href="{{ url_for('dashboard') }}">ダッシュボードへ</a>
    </div>
    <p class="muted">※ メール送信の宛先などは「設定」ページで管理しています。</p>
  </form>
</div>

<style>
.card{border:1px solid #e5e7eb;border-radius:12px;background:#fff;padding:12px;margin:10px 0}
.grid{display:grid;gap:10px;grid-template-columns:repeat(3,minmax(0,1fr))}
label{display:flex;flex-direction:column;gap:6px}
label>span{font-size:12px;color:#6b7280}
input,select{padding:8px;border:1px solid #e5e7eb;border-radius:8px;background:#fff}
.grow{grid-column:span 3}
.actions{display:flex;gap:10px;margin-top:10px;flex-wrap:wrap}
.actions .btn,.actions button{padding:8px 12px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;text-decoration:none;color:#111;cursor:pointer}
.actions button{background:#111;color:#fff;border-color:#111}
.actions .secondary{background:#fff;color:#111}
.muted{color:#6b7280}
@media (max-width:900px){.grid{grid-template-columns:1fr}.grow{grid-column:span 1}}
</style>

{% endblock %}

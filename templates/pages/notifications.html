{% extends "base/layout.html" %}
{% block title %}é€šçŸ¥ä¸€è¦§ | ãƒªã‚µãƒ¼ãƒãƒŠãƒ“{% endblock %}
{% block content %}

<h1>é€šçŸ¥ä¸€è¦§</h1>

<!-- ãƒ•ã‚£ãƒ«ã‚¿ï¼æ“ä½œ -->
<section class="toolbar">
  <div class="left">
    <label>æœŸé–“
      <select id="range">
        <option value="all">ã™ã¹ã¦</option>
        <option value="7d">ç›´è¿‘7æ—¥</option>
        <option value="30d">ç›´è¿‘30æ—¥</option>
        <option value="today">ä»Šæ—¥</option>
      </select>
    </label>
    <label>ç¨®åˆ¥
      <select id="type">
        <option value="all">ã™ã¹ã¦</option>
        <option value="profit">åˆ©ç›Šã‚¢ãƒ©ãƒ¼ãƒˆ</option>
        <option value="pricedrop">å€¤ä¸‹ã’</option>
        <option value="stock">åœ¨åº«</option>
      </select>
    </label>
    <label>çŠ¶æ…‹
      <select id="state">
        <option value="all">ã™ã¹ã¦</option>
        <option value="unread">æœªèª­ã®ã¿</option>
      </select>
    </label>
  </div>
  <div class="right">
    <button id="markAll">ã™ã¹ã¦æ—¢èª­</button>
    <button id="clearRead">æ—¢èª­ã‚’éš ã™</button>
  </div>
</section>

<!-- é€šçŸ¥ãƒªã‚¹ãƒˆï¼ˆã‚µãƒ¼ãƒã‹ã‚‰æ¸¡ã•ã‚Œãªã„å ´åˆã¯ã‚µãƒ³ãƒ—ãƒ«ã‚’è¡¨ç¤ºï¼‰ -->
<section id="notifs" class="notifs">
  {# å°†æ¥: ã‚µãƒ¼ãƒã‹ã‚‰ notifs ã‚’æ¸¡ã™ #}
  {% if notifs %}
    {% for n in notifs %}
      <article class="notif {{ n.kind }} {{ 'unread' if n.unread else '' }}">
        <div class="icon" aria-hidden="true">
          {% if n.kind=='profit' %}ğŸ’°{% elif n.kind=='pricedrop' %}ğŸ“‰{% elif n.kind=='stock' %}ğŸ“¦{% else %}ğŸ””{% endif %}
        </div>
        <div class="content">
          <header>
            <h3 class="title">{{ n.title }}</h3>
            <time class="time">{{ n.time }}</time>
          </header>
          <p class="body">{{ n.body }}</p>
          {% if n.meta %}
          <dl class="meta">
            {% for k,v in n.meta.items() %}
              <div><dt>{{ k }}</dt><dd>{{ v }}</dd></div>
            {% endfor %}
          </dl>
          {% endif %}
        </div>
        <div class="actions">
          <button class="btn-read">æ—¢èª­</button>
          <button class="btn-snooze">ã‚¹ãƒŒãƒ¼ã‚º</button>
        </div>
      </article>
    {% endfor %}
  {% else %}
    {# ãƒ‡ãƒ¢ãƒ‡ãƒ¼ã‚¿ï¼ˆä»Šã™ãè¦‹æ „ãˆã™ã‚‹ï¼‰ #}
    <article class="notif profit unread">
      <div class="icon">ğŸ’°</div>
      <div class="content">
        <header>
          <h3 class="title">åˆ©ç›Šã‚¢ãƒ©ãƒ¼ãƒˆï¼šSwitch æœ‰æ©ŸELï¼ˆåˆ©ç›Š Â¥8,900 / 21%ï¼‰</h3>
          <time class="time">ä»Šæ—¥ 14:22</time>
        </header>
        <p class="body">æ¡ä»¶ï¼šåˆ©ç›Šâ‰¥Â¥8,000 AND åˆ©ç›Šç‡â‰¥18% AND å›è»¢â‰¥70</p>
        <dl class="meta">
          <div><dt>è²©å£²</dt><dd>Â¥44,800</dd></div>
          <div><dt>ä»•å…¥</dt><dd>Â¥33,000</dd></div>
          <div><dt>åœ¨åº«</dt><dd>â—¯ï¼ˆå‡ºå“è€… 6ï¼‰</dd></div>
        </dl>
      </div>
      <div class="actions">
        <button class="btn-read">æ—¢èª­</button>
        <button class="btn-snooze">ã‚¹ãƒŒãƒ¼ã‚º</button>
      </div>
    </article>

    <article class="notif pricedrop unread">
      <div class="icon">ğŸ“‰</div>
      <div class="content">
        <header>
          <h3 class="title">å€¤ä¸‹ã’æ¤œçŸ¥ï¼šAnker 100W å……é›»å™¨ï¼ˆ-12%ï¼‰</h3>
          <time class="time">æ˜¨æ—¥ 19:05</time>
        </header>
        <p class="body">å‰å›æ¯” -Â¥980 / ã‚¯ãƒ¼ãƒãƒ³å‡ºç¾ã§å®Ÿè³ªã•ã‚‰ã« -Â¥500</p>
        <dl class="meta">
          <div><dt>æœ€å®‰</dt><dd>Â¥6,980</dd></div>
          <div><dt>å®Ÿè³ª</dt><dd>Â¥6,480ï¼ˆãƒã‚¤ãƒ³ãƒˆ/ã‚¯ãƒ¼ãƒãƒ³è¾¼ï¼‰</dd></div>
        </dl>
      </div>
      <div class="actions">
        <button class="btn-read">æ—¢èª­</button>
        <button class="btn-snooze">ã‚¹ãƒŒãƒ¼ã‚º</button>
      </div>
    </article>

    <article class="notif stock">
      <div class="icon">ğŸ“¦</div>
      <div class="content">
        <header>
          <h3 class="title">åœ¨åº«å¾©æ´»ï¼šãƒ¬ã‚´ ã‚¢ã‚¤ãƒ‡ã‚¢ #21348</h3>
          <time class="time">2025-08-12 08:11</time>
        </header>
        <p class="body">åœ¨åº«: â–³ / ç«¶åˆã‚¹ã‚³ã‚¢: 42 / å›è»¢: 76</p>
        <dl class="meta">
          <div><dt>BuyBox</dt><dd>Â¥12,480</dd></div>
          <div><dt>å·®é¡</dt><dd>+Â¥2,400 è¦‹è¾¼ã¿</dd></div>
        </dl>
      </div>
      <div class="actions">
        <button class="btn-read">æ—¢èª­</button>
        <button class="btn-snooze">ã‚¹ãƒŒãƒ¼ã‚º</button>
      </div>
    </article>
  {% endif %}
</section>

<style>
.toolbar{
  display:flex;justify-content:space-between;align-items:center;gap:10px;margin:10px 0 14px;
  border:1px solid #e5e7eb;border-radius:12px;padding:10px;background:#fff;
}
.toolbar .left{display:flex;gap:12px;flex-wrap:wrap}
.toolbar label{font-size:12px;color:#6b7280;display:flex;align-items:center;gap:6px}
.toolbar select{padding:8px;border:1px solid #e5e7eb;border-radius:8px;background:#fff}
.toolbar .right button{padding:8px 10px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;cursor:pointer}
.toolbar .right button:hover{border-color:#cbd5e1;box-shadow:0 1px 4px rgba(0,0,0,.06)}

.notifs{display:grid;gap:12px}
.notif{
  display:grid;grid-template-columns:auto 1fr auto;gap:12px;align-items:flex-start;
  background:#fff;border:1px solid #e5e7eb;border-radius:14px;padding:12px;
}
.notif.unread{box-shadow:0 6px 16px rgba(2,6,23,.06);border-color:#dbe2ea}
.icon{font-size:24px;line-height:1;width:28px;text-align:center}
.content header{display:flex;justify-content:space-between;gap:8px;align-items:center}
.title{margin:0;font-size:15px}
.time{color:#6b7280;font-size:12px;white-space:nowrap}
.body{margin:6px 0 0 0;color:#334155}
.meta{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:6px;margin-top:8px}
.meta dt{font-size:11px;color:#6b7280}
.meta dd{margin:2px 0 0 0;font-weight:600}
.actions{display:flex;flex-direction:column;gap:6px}
.actions button{padding:8px 10px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;cursor:pointer;white-space:nowrap}
.actions button:hover{border-color:#cbd5e1}
.notif.profit .icon{filter: hue-rotate(70deg)}
.notif.pricedrop .icon{filter: hue-rotate(300deg)}
.notif.stock .icon{filter: hue-rotate(200deg)}

@media (max-width:720px){
  .meta{grid-template-columns:repeat(2,minmax(0,1fr))}
  .content header{flex-direction:column;align-items:flex-start}
}
</style>

<script>
(()=> {
  const root = document.getElementById('notifs');
  const markAll = document.getElementById('markAll');
  const clearRead = document.getElementById('clearRead');
  root?.addEventListener('click', e=>{
    const btn = e.target.closest('button');
    if(!btn) return;
    const card = e.target.closest('.notif');
    if(btn.classList.contains('btn-read')) card?.classList.remove('unread');
    if(btn.classList.contains('btn-snooze')) { card?.style.opacity = .4; }
  });
  markAll?.addEventListener('click', ()=> {
    document.querySelectorAll('.notif.unread').forEach(n=>n.classList.remove('unread'));
  });
  clearRead?.addEventListener('click', ()=> {
    document.querySelectorAll('.notif:not(.unread)').forEach(n=>n.style.display='none');
  });
})();
</script>

{% endblock %}

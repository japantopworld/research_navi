{% extends "base/layout.html" %}
{% block title %}リサーチナビ | マイページ{% endblock %}
{% block content %}

<style>
  .mypage-container {
    max-width: 800px;
    margin: 2rem auto;
    padding: 2rem;
    background: #fff;
    border-radius: 0.8rem;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
    font-size: 1.1rem;
  }
  .mypage-container h2 {
    margin-bottom: 1rem;
    color: #dc2626;
  }
  .mypage-info {
    line-height: 1.8;
  }
  .mypage-info strong {
    color: #333;
  }
  table {
    width: 100%;
    margin-top: 1.5rem;
    border-collapse: collapse;
  }
  th, td {
    border: 1px solid #ddd;
    padding: 8px;
    text-align: left;
  }
  th {
    background: #f9fafb;
    color: #111;
  }
</style>

<div class="mypage-container">
  <h2>👤 {{ display_name }} さんのマイページ</h2>
  <div class="mypage-info">
    <p><strong>ID:</strong> {{ user["ID"] }}</p>
    <p><strong>メールアドレス:</strong> {{ user["メールアドレス"] or "未登録" }}</p>
    <p><strong>部署:</strong> {{ user["部署"] or "未設定" }}</p>
    <p><strong>紹介者NO:</strong> {{ user["紹介者NO"] or "なし" }}</p>
  </div>

  <hr>
  <h3>📊 利益商品リスト</h3>
  <table>
    <thead>
      <tr><th>商品名</th><th>利益率</th><th>利益額</th></tr>
    </thead>
    <tbody>
      {% for item in items %}
      <tr>
        <td>{{ item.name }}</td>
        <td>{{ item.profit_rate }}%</td>
        <td>{{ item.profit_amount }}円</td>
      </tr>
      {% else %}
      <tr><td colspan="3">データがありません</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>

{% endblock %}

{% extends "base/layout.html" %}
{% block title %}マイページ | リサーチナビ{% endblock %}
{% block content %}

<!-- ▼ ナビバー -->
<nav class="topnav">
  <div class="nav-buttons">
    <a href="{{ url_for('mypage', user_id=session.get('user_id')) }}" class="btn">🏠 ホーム</a>
    <a href="{{ url_for('support') }}" class="btn">💬 サポート</a>
    <a href="{{ url_for('services') }}" class="btn">📋 サービス一覧</a>
    <a href="{{ url_for('news') }}" class="btn">📰 お知らせ一覧</a>
    <a href="{{ url_for('mypage_edit', user_id=session.get('user_id')) }}" class="btn">👤 プロフィール編集</a>
    <a href="{{ url_for('settings') }}" class="btn">⚙️ 各種設定</a>
    <a href="{{ url_for('logout') }}" class="btn btn-ghost">↩︎ ログアウト</a>
  </div>
</nav>

<style>
  .mypage-card {
    max-width: 900px;
    margin: 5vh auto;
    padding: 2rem;
    background: #fff;
    border-radius: 1rem;
    box-shadow: 0 6px 24px rgba(0,0,0,.08);
    text-align: center;
  }
  .mypage-card h1 {
    font-size: 1.6rem;
    margin-bottom: 1.5rem;
    color: #dc2626;
  }
  .task-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 1rem;
    margin-top: 2rem;
  }
  .task-item {
    padding: 1.2rem;
    border-radius: .8rem;
    background: #f9fafb;
    box-shadow: 0 2px 8px rgba(0,0,0,.05);
    transition: transform .1s ease;
  }
  .task-item:hover { transform: translateY(-3px); }
  .task-item a {
    text-decoration: none;
    font-weight: bold;
    color: #dc2626;
    display: block;
  }
  .task-item p {
    margin-top: .5rem;
    font-size: .85rem;
    color: #374151;
  }
</style>

<!-- ▼ マイページ本体 -->
<div class="mypage-card">
  <h1>ようこそ {{ display_name }} さん</h1>
  <p>主要機能はこちらから利用できます。</p>

  <div class="task-grid">
    <div class="task-item">
      <a href="{{ url_for('search') }}">🔍 商品検索</a>
      <p>メルカリ・Amazon・楽天・Yahooなど同時検索（画像AI推定対応）</p>
    </div>
    <div class="task-item">
      <a href="{{ url_for('profit') }}">💰 利益計算</a>
      <p>売価・仕入・手数料入力で即計算（ROI・損益分岐点など）</p>
    </div>
    <div class="task-item">
      <a href="{{ url_for('history') }}">📜 履歴一覧</a>
      <p>過去検索や利益計算の保存一覧（CSV出力・絞り込みあり）</p>
    </div>
    <div class="task-item">
      <a href="{{ url_for('ranking') }}">📊 ランキング</a>
      <p>トレンド・回転率・ROI・利益・リスク順など切替表示</p>
    </div>
    <div class="task-item">
      <a href="{{ url_for('alerts') }}">🔔 アラート一覧</a>
      <p>利益商品通知履歴（利益〇円以上など設定可）</p>
    </div>
  </div>
</div>

{% endblock %}

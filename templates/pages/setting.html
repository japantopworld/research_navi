{% extends "base/layout.html" %}
{% block title %}è¨­å®š | ãƒªã‚µãƒ¼ãƒãƒŠãƒ“{% endblock %}
{% block content %}

<h1>âš™ï¸ è¨­å®š</h1>

<div class="card">
  <form method="post" action="{{ url_for('setting') }}">
    <div class="grid">
      <label>
        <span>ãƒ¡ãƒ¼ãƒ«é€šçŸ¥ã‚’æœ‰åŠ¹åŒ–</span>
        <label class="switch">
          <input type="checkbox" name="mail_enabled" {% if s.mail_enabled %}checked{% endif %}>
          <i></i><em>{{ 'ON' if s.mail_enabled else 'OFF' }}</em>
        </label>
        <small class="muted">åˆ©ç›ŠãŒé–¾å€¤ã‚’è¶…ãˆãŸã¨ãã€ãƒ¡ãƒ¼ãƒ«ã§é€šçŸ¥ã—ã¾ã™ã€‚</small>
      </label>

      <label>
        <span>ãƒ¡ãƒ¼ãƒ«ãƒ—ãƒ­ãƒã‚¤ãƒ€ï¼ˆã¾ãŸã¯SMTPãƒ›ã‚¹ãƒˆï¼‰</span>
        <input name="mail_provider" value="{{ s.mail_provider or 'gmail' }}" placeholder="gmail / icloud / outlook / yahoo / smtp.example.com">
        <small class="muted">æ—¢å®š: gmail / icloud / outlook / yahooã€‚ç‹¬è‡ªSMTPã¯ãƒ›ã‚¹ãƒˆåã‚’ç›´æ¥å…¥åŠ›ã€‚</small>
      </label>

      <label>
        <span>é€ä¿¡å…ƒã‚¢ãƒ‰ãƒ¬ã‚¹ï¼ˆãƒ­ã‚°ã‚¤ãƒ³IDï¼‰</span>
        <input name="mail_from" value="{{ s.mail_from }}" placeholder="example@gmail.com" required>
      </label>

      <label class="grow">
        <span>é€ä¿¡å…ˆã‚¢ãƒ‰ãƒ¬ã‚¹ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰</span>
        <input name="mail_to" value="{{ s.mail_to }}" placeholder="taro@example.com, hanako@example.com">
      </label>

      <label>
        <span>ã‚¢ãƒ—ãƒªãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ / SMTPãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</span>
        <input name="mail_pass" type="password" value="" placeholder="â€»æœªå…¥åŠ›ãªã‚‰å¤‰æ›´ã—ã¾ã›ã‚“">
        <small class="muted">ç©ºæ¬„ãªã‚‰æ—¢å­˜ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ä¿æŒã—ã¾ã™ã€‚</small>
      </label>

      <label>
        <span>åˆ©ç›Šã®é–¾å€¤ï¼ˆå††ï¼‰</span>
        <input name="profit_threshold" type="number" inputmode="numeric" value="{{ s.profit_threshold or 5000 }}" min="0" step="100">
        <small class="muted">ã“ã®é‡‘é¡ä»¥ä¸Šã®åˆ©ç›Šã§é€šçŸ¥ã—ã¾ã™ã€‚</small>
      </label>
    </div>

    <div class="actions">
      <button type="submit">ğŸ’¾ ä¿å­˜ã™ã‚‹</button>
      <form method="post" action="{{ url_for('setting_test_mail') }}" style="display:inline;">
        <button type="submit" class="ghost">âœ‰ï¸ ãƒ†ã‚¹ãƒˆé€ä¿¡</button>
      </form>
      <a href="{{ url_for('notifications') }}" class="btn">ğŸ“£ é€šçŸ¥ä¸€è¦§ã¸</a>
    </div>
  </form>
</div>

<div class="card">
  <h3>ãƒ˜ãƒ«ãƒ—</h3>
  <ul class="muted">
    <li>Gmailã¯ <b>2æ®µéšèªè¨¼ï¼‹ã‚¢ãƒ—ãƒªãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</b> ãŒå¿…è¦ã§ã™ã€‚</li>
    <li>iCloudã¯ã€Œ<b>Appç”¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</b>ã€ãŒå¿…è¦ã§ã™ã€‚</li>
    <li>ç‹¬è‡ªSMTPã‚’ä½¿ã†å ´åˆã¯ã€Œãƒ—ãƒ­ãƒã‚¤ãƒ€ã€ã« <code>smtp.example.com</code> ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆãƒãƒ¼ãƒˆã‚„SSL/TLSã¯è‡ªå‹•åˆ¤å®šï¼‰ã€‚</li>
  </ul>
</div>

<style>
.card{border:1px solid #e5e7eb;border-radius:12px;background:#fff;padding:12px;margin:10px 0}
.grid{display:grid;gap:12px;grid-template-columns:repeat(2,minmax(0,1fr))}
.grow{grid-column:span 2}
label{display:flex;flex-direction:column;gap:6px}
label>span{font-size:12px;color:#6b7280}
input{padding:10px;border:1px solid #e5e7eb;border-radius:10px;background:#fff}
.actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:8px}
.actions button{padding:10px 14px;border-radius:10px;border:1px solid #111;background:#111;color:#fff;cursor:pointer}
.actions .ghost{background:#fff;color:#111;border-color:#e5e7eb}
.actions .btn{padding:10px 14px;border:1px solid #e5e7eb;border-radius:10px;text-decoration:none;color:#111;background:#fff}
.muted{color:#6b7280}
.switch{position:relative;display:inline-flex;align-items:center;gap:8px}
.switch input{display:none}
.switch i{width:46px;height:26px;border-radius:20px;position:relative;background:#e5e7eb;display:inline-block;transition:.2s}
.switch i::after{content:"";position:absolute;top:3px;left:3px;width:20px;height:20px;background:#fff;border-radius:50%;box-shadow:0 1px 3px rgba(0,0,0,.15);transition:.2s}
.switch input:checked + i{background:#111}
.switch input:checked + i::after{transform:translateX(20px)}
.switch em{font-style:normal;color:#6b7280}
@media (max-width:900px){.grid{grid-template-columns:1fr}.grow{grid-column:span 1}}
</style>

{% endblock %}
